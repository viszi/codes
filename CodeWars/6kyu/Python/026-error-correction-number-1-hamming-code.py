# https://www.codewars.com/kata/5ef9ca8b76be6d001d5e1c3e
# Task 1: Encode function
# Implement the encode function, using the following steps:
# - convert every letter of the text to its ASCII value;
# - convert ASCII values to 8-bit binary;
# - triple every bit;
# - concatenate the result;
# Task 2: Decode function:
# - Split the input into groups of three characters;
# - Check if an error occurred: replace each group with the character that occurs most often, e.g. 010 --> 0, 110 --> 1, etc;
# - Take each group of 8 characters and convert that binary number;
# - Convert the binary values to decimal (ASCII);
# - Convert the ASCII values to characters and concatenate the result


def encode(string):
    bits = ''

    for char in string:
        char_code = ord(char)
        char_bin = bin(char_code)[2:].rjust(8, '0')
        bits += ''.join([b * 3 for b in char_bin])    
    return bits


def decode(bits):
    string = ''
    char_bin = ''

    for i in range(0, len(bits) + 1, 3):
        triplet = bits[i:i + 3]
        #bit = '0' if triplet.count('0') >= 2 else '1'
        bit = '0' if triplet in ('000','001','010','100') else '1'
        if len(char_bin) != 8:
            char_bin += bit
        else:
            char_code = int(char_bin, 2)
            string += chr(char_code)
            char_bin = bit
        
    return string

#print(encode("hey"), "000111111000111000000000000111111000000111000111000111111111111000000111")
# print(encode("The Sensei told me that i can do this kata"), "000111000111000111000000000111111000111000000000000111111000000111000111000000111000000000000000000111000111000000111111000111111000000111000111000111111000111111111000000111111111000000111111000111111000000111000111000111111000111000000111000000111000000000000000000111111111000111000000000111111000111111111111000111111000111111000000000111111000000111000000000000111000000000000000000111111000111111000111000111111000000111000111000000111000000000000000000111111111000111000000000111111000111000000000000111111000000000000111000111111111000111000000000000111000000000000000000111111000111000000111000000111000000000000000000111111000000000111111000111111000000000000111000111111000111111111000000000111000000000000000000111111000000111000000000111111000111111111111000000111000000000000000000111111111000111000000000111111000111000000000000111111000111000000111000111111111000000111111000000111000000000000000000111111000111000111111000111111000000000000111000111111111000111000000000111111000000000000111")
# print(encode("T3st"), "000111000111000111000000000000111111000000111111000111111111000000111111000111111111000111000000")
# print(encode("T?st!%"), "000111000111000111000000000000111111111111111111000111111111000000111111000111111111000111000000000000111000000000000111000000111000000111000111")

print(decode("100111111000111001000010000111111000000111001111000111110110111000010111"), "hey")
print(decode("000111000111000111000100000111111000111000001000000111111000010111000111000100111000000000000100000111000111000000111111000111111000000111000111000111111000111111111000000111111111000000111111000110111000000111000111000111111000111000000111000000111000000000000000000111111111000111000000000111111000111111111111000111111000111111000000000111111000000111000001000000111000000000001000000111111000111111000111000111111000000111000111000000111000000000000000000111111111000111000000000111111000111000000000000111111000000010000111000111111111000111000000000100111000000000000000000111111000111000000111000000111000000000000000000111111000000000111111000111111000000000000111000111111000111111111000000000111000000000000010000111111000000111000000000111111000111111110111000000111000000000000000000111111111000111000000000111111000111000000000000111111000111000000111000111111111000000111111000000111000000000000000000111111000111000111111000111111000000000000111000111111111000111000000000111111000000000000111"), "The Sensei told me that i can do this kata")
print(decode("000111000111000111000010000000111111000000111111000111111111000000111111000111111111000111010000"), "T3st")
print(decode("000111000111000111000001000000111111110111111111000111111111000000111111000111111111000111000000000000111000000000000111000000111000000111000111"), "T?st!%")
