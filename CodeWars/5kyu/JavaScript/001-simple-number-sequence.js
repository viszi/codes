// https://www.codewars.com/kata/5a28cf591f7f7019a80000de
// In this Kata, you will be given a string of numbers in sequence and your task will be to return the missing number. 
// If there is no number missing or there is an error in the sequence, return -1.
// For example:
// missing("123567") = 4 
// missing("899091939495") = 92
// missing("9899101102") = 100
// missing("599600601602") = -1 -- no number missing
// missing("8990919395") = -1 -- error in sequence. Both 92 and 94 missing

function missing(s) {
    //find the length of the starting number
    let maxlen = s.length;

    //let's assume that at least 3 numbers are in the string so the length of a single number is max the third of the full string
    let len = parseInt(maxlen / 3) + 1
    while (len > 0) {       
        //create shorter and shorter numbers from the beginning of the string until the difference between them is 1 or 2
        num1 = s.slice(0, len); 
        num2 = s.slice(len, len * 2);
        num2long = s.slice(len, 2 * len + 1);  //if num1 is 99 and num2 is 100 or 101

        //find those cases when difference between the 2 numbers are only 1 or 2 (e.g. 101 v. 102 or 101 v. 103 or 99 v. 100)
        if (num2 - num1 === 1 || num2 - num1 === 2 || num2long - num1 === 1 || num2long - num1 === 2) {
            break;
        }
        len--;
    }

    //this will be the starting number
    let number = s.slice(0, len);
    
    //store the missing numbers
    let missing = [];
    
    //create the next number and try to find it in the string
    while (s.length > len - 1 || s != '' || missing.length == 2) {
        //number should be always at the first position
        if (s.indexOf(number) == 0) {
            //delete the number from the string
            s = s.replace(number, '')
        } else {
            //add the missing number to the array
            missing.push(number);
        }
        number++;
    }

    //if there is only 1 missing number return it otherwise use -1
    return (missing.length === 1) ? missing[0] : -1;
}


console.log(missing("123567"), 1, 4);
console.log(missing("899091939495"), 89, 92);
console.log(missing("9899101102"), 98, 100);
console.log(missing("599600601602"), 599, -1);
console.log(missing("8990919395"), 89, -1);
console.log(missing("998999100010011003"), 998, 1002);
console.log(missing("99100101102"), 99, -1);
console.log(missing("99991000110002"), 9999, 10000);
console.log(missing("979899100101102"), 97, -1);
console.log(missing("900001900002900004900005900006"), 900001, 900003);
console.log(missing("211926211927211928211929211931211932211933211934211935211936211937211938211939"), 211926, 211930);
console.log(missing('645324645325645326645327645328645329645330645331645332645333645334645335'), 645324, -1);
console.log(missing('380630380632380633380634380635380636380637380638380639380640380641380642380643'), 380630, 380631);
console.log(missing('536178536179536180536181536182536183536184536185536187536188536189'), 536186);
console.log(missing('999299939995999699979998999910000100011000210003'), 9994);
console.log(missing('7264572646726477264872649726507265172652726537265472655'), -1);
console.log(missing('9939949959969979989991000100110021003'), -1);
console.log(missing('657906657907657908657909657910657911657912657913657914'), -1);
console.log(missing('9496979899100101102103'), 95);
console.log(missing('837725837726837728837729837730837731837732837733837734'), 837727);
console.log(missing('9495969798100101102103'), 99);
console.log(missing('439983439984439986439987439988439989439990439991439992'), 439985);
console.log(missing('999499959996999799989999100001000110002'), -1);
console.log(missing('123618123619123620123621123622123623123624123625123626'), -1);
console.log(missing('9994999599979998999910000100011000210003'), 9996);
console.log(missing('85188851898519085191851928519385194851958519685197851988519985200'), -1);
console.log(missing('999919999299993999949999599996999979999899999100000100001100002100003'), -1);
console.log(missing('898128898129898130898131898132898133898134898135898136898137'), -1);
console.log(missing('9949959969979989991000100110021003'), -1);
console.log(missing('592617592618592619592621592623592624592625592626'), -1);
console.log(missing('9999499995999979999899999100000100001100002100003'), 99996);
console.log(missing('556136556137556138556139556140556141556142556144556145556146556147556148'), 556143);
console.log(missing('991992993994995996998999100010011003'), -1);
console.log(missing('644219644220644221644223644224644225644226644227644228644229644230644231644232'), 644222);
console.log(missing('02345678910111213'), 1);
console.log(missing('967404967405967406967407967408967409967410967411967412967413'), -1);
console.log(missing('9949959969979989991000100110021003'), -1);
console.log(missing('570131570133570134570135570136570137570138570140570141570142'), -1);
console.log(missing('99992999939999499995999969999899999100000100001100002100003'), 99997);
console.log(missing('499706499707499709499710499711499712499713499714499715499716499717499718499719'), 499708);
console.log(missing('9990999199929993999499959996999799989999100001000210003'), 10001);
console.log(missing('584605584606584607584608584610584611584612584613584614584615584616'), 584609);
console.log(missing('999299949995999699979998999910000100011000210003'), 9993);
console.log(missing('97128971299713097131971329713397134971369713797138971399714097141'), 97135);
console.log(missing('99909992999399949995999699979998999910000100011000210003'), 9991);
console.log(missing('397285397286397287397288397289397290397291397293397294397295397296397297397298'), 397292);
console.log(missing('99909991999399949995999699979998999910000100011000210003'), 9992);
console.log(missing('827983827984827985827986827988827989827990827991827992827993827994827995827996'), 827987);
console.log(missing('01235678910111213'), 4);
console.log(missing('709135709136709137709138709139709140709141709142709143709144709145709146709147709148'), -1);
console.log(missing('012345678910111213'), -1);
console.log(missing('494962494963494964494965494966494968494969494970494971494972494973'), 494967);
console.log(missing('9929939949969979989991000100110021003'), 995);
console.log(missing('452233452234452235452236452237452238452239452240452241452242452243452244'), -1);
console.log(missing('2345678910111213'), -1);
console.log(missing('21320213212132221323213242132521326213272132921330'), 21328);
console.log(missing('993994995996998999100010011003'), -1);
console.log(missing('703874703875703876703877703878703879703880703881703882703883703884703885'), -1);
console.log(missing('9992999399949995999699979998999910000100011000210003'), -1);
console.log(missing('448767448768448769448770448772448773448774448775448776448777448778'), 448771);
console.log(missing('9999299993999949999599996999979999899999100000100002100003'), 100001);
console.log(missing('370713370715370716370717370718370719370720370721370722370723370724370725370726'), 370714);
console.log(missing('999909999199992999939999599996999979999899999100000100001100003'), -1);
console.log(missing('103034103035103036103037103038103040103041103042103043103044103045103046103047'), 103039);
console.log(missing('01234578910111213'), 6);
console.log(missing('969359969360969361969363969365969366969367969368969369'), -1);
console.log(missing('993994995996997998999100010021003'), 1001);
console.log(missing('767293767294767295767296767297767298767299767300767302767303767304767305767306'), 767301);
console.log(missing('99909991999399949995999699979998999910000100011000210003'), 9992);
console.log(missing('84123841248412584126841278412884129841308413184132841338413484135'), -1);
console.log(missing('9919929939949959969979989991000100110021003'), -1);
console.log(missing('151437151438151439151440151441151442151443151444151445151446151447151448151449'), -1);
console.log(missing('919293949596979899100101102103'), -1);
console.log(missing('291023291024291025291026291027291028291030291031291033'), -1);
console.log(missing('99939994999699979998999910000100011000210003'), 9995);
console.log(missing('475215475216475217475218475219475221475222475223475224475225475226'), 475220);
console.log(missing('9293949596979899101102103'), 100);
console.log(missing('600875600876600877600878600879600880600881600882600883600885600886'), 600884);
console.log(missing('99992999949999599996999979999899999100000100001100002100003'), 99993);
console.log(missing('300701300702300703300704300705300706300707300708300709300710300711300712'), -1);
console.log(missing('2345678910111213'), -1);
console.log(missing('751069751070751071751072751073751074751075751076751077751078751079'), -1);
console.log(missing('99993999949999599996999979999899999100000100001100002100003'), -1);
console.log(missing('435104435105435106435107435108435109435110435111435112435113435114435115435116'), -1);
console.log(missing('12345678910111213'), -1);
console.log(missing('598789598790598791598792598793598794598795598796598798598799598800598801'), 598797);
console.log(missing('9991999299949995999699979998999910000100011000210003'), 9993);
console.log(missing('789294789295789296789297789298789299789300789301789302789303789304789305789307'), 789306);
console.log(missing('999909999299993999949999599996999979999899999100000100001100002100003'), 99991);
console.log(missing('475865475866475867475868475869475870475871475872475873475874475875475876'), -1);
console.log(missing('999199929993999499959996999799989999100001000210003'), 10001);
console.log(missing('480325480326480327480328480329480330480331480332480333480334480335'), -1);
console.log(missing('999399949995999699979998999910000100011000210003'), -1);
console.log(missing('441462441463441464441465441466441467441468441469441470441471441472441473441474'), -1);
console.log(missing('12345678910111213'), -1);
console.log(missing('476161476162476163476164476166476167476168476169476170476171476172476173476174'), 476165);
console.log(missing('99909991999299939994999599969998999910000100011000210003'), 9997);
console.log(missing('765584765585765586765587765588765589765590765591765592765593765594'), -1);
console.log(missing('9939949959969979989991000100110021003'), -1);
console.log(missing('519359519360519361519362519363519364519365519366519367519368519369519370519371519372'), -1);
console.log(missing('012345678910111213'), -1);
console.log(missing('555545555546555547555548555549555550555552555553555554555555555556555557'), 555551);
console.log(missing('9999199992999949999599996999979999899999100000100001100002100003'), 99993);
console.log(missing('876184876185876186876187876188876189876190876192876193876194'), 876191);
console.log(missing('993994995996997998999100010021003'), 1001);
console.log(missing('181406181407181408181409181410181411181412181413181414181415181416181417'), -1);
console.log(missing('9999299993999949999599996999979999899999100000100001100002100003'), -1);
console.log(missing('278121278122278123278124278125278126278127278128278130278131278132278133'), 278129);
console.log(missing('9192939495969798100101102103'), 99);
console.log(missing('410567410568410569410570410571410572410573410574410575410576'), -1);